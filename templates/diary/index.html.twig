{% extends 'base.html.twig' %}

{% block title %}My Diary{% endblock %}

{% block body %}
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>My Diary</h1>
        <a href="{{ path('diary_new') }}" class="btn btn-cyber">
            <i class="mdi mdi-plus"></i> New Entry
        </a>
    </div>

    <div class="row">
        {% for entry in entries %}
            <div class="col-md-6 mb-4">
                <div class="card glass-panel h-100">
                    <div class="card-body body-color">
                        <div class="d-flex justify-content-between">
                            <h4 class="card-title">
                                <a href="{{ path('diary_show', {id: entry.id}) }}" class="text-decoration-none">
                                    {{ entry.title }}
                                </a>
                            </h4>
                            {% if entry.isFavorite %}
                                <i class="mdi mdi-star text-warning"></i>
                            {% endif %}
                        </div>
                        <span class="card-subtitle mb-2 text-muted">
                            {{ entry.createdAt|date('F j, Y g:i:s a') }}
                            {% if entry.mood %}
                                â€¢ {{ entry.mood }}
                            {% endif %}
                        </span>
                        <p class="card-text">{{ entry.content|striptags|slice(0, 150) }}...</p>
                        {% if entry.tags %}
                            <div class="mt-2">
                                {% for tag in entry.tags %}
                                    <span class="badge bg-light text-secondary opacity-25 me-1">{{ tag }}</span>
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        {% else %}
            <div class="col-12">
                <div class="alert glass-panel glass-panel-glow">
                    No diary entries yet. <a href="{{ path('diary_new') }}">Create your first entry</a>!
                </div>
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block javascripts %}
{{ parent() }}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Future JavaScript for diary features
});
</script>
{% endblock %}
